###    运行时数据区域

运行时数据区域包括：方法区、堆、 虚拟机栈、本地方法栈、程序计数器。

####   程序计数器

​	java虚拟机的多线程是通过**线程轮流切换**并分配处理器执行时间的方式来实现的，在任何一个确定的时刻，一个处理器都只会执行一条线程中的指令。为了**线程切换后能恢复到正确的执行位置**，每条线程都需要一个独立的程序计数器，各条线程之间计数器互不影响，独立存储，是线程私有的。

​	如果线程正在执行的是一个java方法，这个计数器记录的是正在执行的虚拟机字节码指令地址。



####   虚拟机栈(栈内存)

​	虚拟机栈也是线程私有的。

​	虚拟机栈描述的是java方法执行的**内存模型**：每个方法在执行的同时都会创建一个栈帧用于存储**局部变量表**、**操作数栈**、**动态链接**、**方法出口**等信息。

​	局部变量表存放了编译期可知的各种**基本数据类型**、**对象引用**（指向对象起始地址的引用指针）和 **returnAddress类型**。

​	long和double类型的数据会占用2个局部变量空间。

####   本地方法栈

虚拟机栈为虚拟机执行java方法服务，本地方法栈为虚拟使用到的Native方法服务。



####   java堆

java堆是被**所有线程共享**的一块内存区域，在虚拟机启动时创建，**用于存放对象实例**。

java堆是垃圾回收器管理的主要区域，可以细分为：新生代和老年代。

可以通过 -Xmx 和 -Xms来扩展。

![](./img/堆.jpg)



####  方法区

方法区也是**线程共享**的内存区域，用于存放已被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等数据。

 #####  运行时常量池

运行时常量池是方法区的一部分。

class文件中有一项信息是**常量池**，用于存放编译期生成的各种**字面变量和符号引用**，这部分内容在类加载后进入方法区的运行时常量池中









