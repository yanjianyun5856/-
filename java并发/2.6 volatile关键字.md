#####volatile变量

一个变量被声明为volatile时，线程在写入变量时不会把值缓存在寄存器或其他地方，而是**把值刷新回主内存**。

其他线程在读该变量时，**从主内存中获取最新值**，不使用当前线程工作内存中的值。

volatile变量保证内存的**可见性**。

**volatile可以避免重排序**，写volatile变量时，可以确保volatile写之前的操作不会被编译重排序到volatile写之后。



##### 什么时候使用volatile关键字

1. **写入变量值不依赖变量当前的值**。因为如果依赖当前值，将是 获取-计算-写入 三步操作，这三步操作不是原子性，**volatile不保证原子性**。
2. **读写变量值时没有加锁**，因为锁本身已经保证了内存可见性。



