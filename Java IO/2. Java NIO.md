### Java NIO

Java NIO由以下三个核心组件组成：

1. Channel（通道）
2. Buffer（缓冲区）
3. Selector（选择器）



##### 通道（Channel）

在OIO中，同一个网络连接会关联到两个流：一个输入流（InputStream），另一个输出流（Output Stream）。通过这两个流，不断地进行输入和输出的操作。

在NIO中，同一个网络连接使用一个通道表示，所有的NIO的IO操作都是从通道开始的。一个通道类似于OIO中的两个流的结合体，既可以从通道读取，也可以向通道写入。

##### Selector选择器

IO多路复用指的是一个进程/线程可以同时监视多个文件描述符（一个网络连接，操作系统底层使用一个文件描述符来表示），一旦其中的一个或者多个文件描述符可读或者可写，系统内核就通知该进程/线程。

在Java应用层面，实现对多个文件描述符的监视 需要用到一个非常重要的Java NIO组件——Selector选择器。

选择器 是 一个IO事件的查询器。通过选择器，一个线程可以查询多个通道的IO事件的就绪状态。

实现IO多路复用，从具体的开发层面来说，首先把通道注册到选择器中，然后通过选择器内部的机制，可以查询（select）这些注册的通道是否有已经就绪的IO事件（例如可读、可写、网络连接完成等）。

一个选择器只需要一个线程进行监控，换句话说，我们可以很简单地使用一个线程，通过选择器去管理多个通道。这是非常高效的，这种高效来自于Java的选择器组件Selector，以及其背后的操作系统底层的IO多路复用的支持。

与OIO相比，使用选择器的最大优势：系统开销小，系统不必为每一个网络连接（文件描述符）创建进程/线程，从而大大减小了系统的开销。

##### 缓冲区（Buffer）

应用程序与通道（Channel）主要的交互操作，就是进行数据的read读取和write写入。为了完成如此大任，NIO为大家准备了第三个重要的组件——NIO Buffer（NIO缓冲区）。通道的读取，就是将数据从通道读取到缓冲区中；通道的写入，就是将数据从缓冲区中写入到通道中。

缓冲区的使用，是面向流的OIO所没有的，也是NIO非阻塞的重要前提和基础之一。

